<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Set or change emmeans options — emm_options • emmeans</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Set or change emmeans options — emm_options"><meta name="description" content="Use emm_options to set or change various options that are used in
the emmeans package. These options are set separately for different contexts in
which emmGrid objects are created, in a named list of option lists."><meta property="og:description" content="Use emm_options to set or change various options that are used in
the emmeans package. These options are set separately for different contexts in
which emmGrid objects are created, in a named list of option lists."><meta property="og:image" content="https://rvlenth.github.io/emmeans/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">emmeans</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.10.4.900001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/AQuickStart.html">Quick start guide for **emmeans**</a></li>
    <li><a class="dropdown-item" href="../articles/basics.html">Basics of estimated marginal means</a></li>
    <li><a class="dropdown-item" href="../articles/comparisons.html">Comparisons and contrasts in emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/confidence-intervals.html">Confidence intervals and tests in emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/FAQs.html">FAQs for emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/interactions.html">Interaction analysis in emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/messy-data.html">Working with messy data</a></li>
    <li><a class="dropdown-item" href="../articles/models.html">Models supported by emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/predictions.html">Prediction in **emmeans**</a></li>
    <li><a class="dropdown-item" href="../articles/re-engineering-clds.html">Re-engineering CLDs</a></li>
    <li><a class="dropdown-item" href="../articles/sophisticated.html">Sophisticated models in emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/transformations.html">Transformations and link functions in emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/utilities.html">Utilities and options for emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/vignette-topics.html">Index of vignette topics</a></li>
    <li><a class="dropdown-item" href="../articles/xplanations.html">Explanations supplement</a></li>
    <li><a class="dropdown-item" href="../articles/xtending.html">For developers: Extending **emmeans**</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rvlenth/emmeans/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Set or change emmeans options</h1>
      <small class="dont-index">Source: <a href="https://github.com/rvlenth/emmeans/blob/master/R/emmGrid-methods.R" class="external-link"><code>R/emmGrid-methods.R</code></a></small>
      <div class="d-none name"><code>emm_options.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Use <code>emm_options</code> to set or change various options that are used in
the <span class="pkg">emmeans</span> package. These options are set separately for different contexts in
which <code>emmGrid</code> objects are created, in a named list of option lists.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">emm_options</span><span class="op">(</span><span class="va">...</span>, <span class="va">disable</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_emm_option</span><span class="op">(</span><span class="va">x</span>, default <span class="op">=</span> <span class="va">emm_defaults</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">emm_defaults</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="format">Format<a class="anchor" aria-label="anchor" href="#format"></a></h2>
    <p>An object of class <code>list</code> of length 22.</p>
    </div>
    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Option names and values (see Details)</p></dd>


<dt id="arg-disable">disable<a class="anchor" aria-label="anchor" href="#arg-disable"></a></dt>
<dd><p>If non-missing, this will reset all options to their defaults
if <code>disable</code> tests <code>TRUE</code> (but first save them for possible later
restoration). Otherwise, all previously saved options
are restored. This is important for bug reporting; please see the section below
on reproducible bugs. When <code>disable</code> is specified, the other arguments are ignored.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Character value - the name of an option to be queried</p></dd>


<dt id="arg-default">default<a class="anchor" aria-label="anchor" href="#arg-default"></a></dt>
<dd><p>Value to return if <code>x</code> is not found</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>emm_options</code> returns the current options (same as the result
  of <samp>getOption("emmeans")</samp>) – invisibly, unless called with no arguments.</p>
<p><code>get_emm_option</code> returns the currently stored option for <code>x</code>,
  or its default value if not found.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><span class="pkg">emmeans</span>'s options are stored as a list in the system option <code>"emmeans"</code>.
Thus, <code>emm_options(foo = bar)</code> is the same as
<code>options(emmeans = list(..., foo = bar))</code> where <code>...</code> represents any
previously existing options. The list <code>emm_defaults</code> contains the default
values in case the corresponding element of system option <code>emmeans</code> is <code>NULL</code>.</p>
<p>Currently, the following main list entries are supported:</p><dl><dt><code>ref_grid</code></dt>
<dd><p>A named <code>list</code> of defaults for objects created by
<code><a href="ref_grid.html">ref_grid</a></code>. This could affect other objects as well. For example,
if <code>emmeans</code> is called with a fitted model object, it calls
<code>ref_grid</code> and this option will affect the resulting <code>emmGrid</code>
object.</p></dd>

<dt><code>emmeans</code></dt>
<dd><p>A named <code>list</code> of defaults for objects created by
  <code><a href="emmeans.html">emmeans</a></code> or <code><a href="emtrends.html">emtrends</a></code>.</p></dd>

<dt><code>contrast</code></dt>
<dd><p>A named <code>list</code> of defaults for objects created by
  <code><a href="contrast.html">contrast.emmGrid</a></code> or <code><a href="contrast.html">pairs.emmGrid</a></code>.</p></dd>

<dt><code>summary</code></dt>
<dd><p>A named <code>list</code> of defaults used by the methods
  <code><a href="summary.emmGrid.html">summary.emmGrid</a></code>, <code><a href="summary.emmGrid.html">predict.emmGrid</a></code>, <code><a href="summary.emmGrid.html">test.emmGrid</a></code>,
  <code><a href="summary.emmGrid.html">confint.emmGrid</a></code>, and <code><a href="emmip.html">emmip</a></code>. The only option that can
  affect the latter four is <code>"predict.method"</code>.</p></dd>

<dt><code>allow.na.levs</code></dt>
<dd><p>A logical value that if <code>TRUE</code> (the default), allows
  <code>NA</code> to be among the levels of a factor. Older versions of <span class="pkg">emmeans</span> did not
  allow this. So if problems come up (say in a messy dataset that includes incomplete cases),
  try setting this to <code>FALSE</code>.</p></dd>

<dt><code>sep</code></dt>
<dd><p>A character value to use as a separator in labeling factor combinations.
  Such labels are potentially used in several places such as <code><a href="contrast.html">contrast</a></code> and
  <code><a href="plot.html">plot.emmGrid</a></code> when combinations of factors are compared or plotted.
  The default is <code>" "</code>.</p></dd>

<dt><code>parens</code></dt>
<dd><p>Character vector that determines which labels are parenthesized
  when they are contrasted. The first element is a regular expression, and the second and
  third elements are used as left and right parentheses.
  See details for the <code>parens</code> argument in <code><a href="contrast.html">contrast</a></code>. The default
  will parenthesize labels containing the four arithmetic operators,
  using round parentheses.</p></dd>

<dt><code>cov.keep</code></dt>
<dd><p>The default value of <code>cov.keep</code> in <code><a href="ref_grid.html">ref_grid</a></code>.
  Defaults to <code>"2"</code>, i.e., two-level covariates are treated like factors.</p></dd>

<dt><code>graphics.engine</code></dt>
<dd><p>A character value matching
  <code>c("ggplot", "lattice")</code>, setting the default engine to use in
  <code><a href="emmip.html">emmip</a></code> and <code><a href="plot.html">plot.emmGrid</a></code>.  Defaults to <code>"ggplot"</code>.</p></dd>

<dt><code>msg.interaction</code></dt>
<dd><p>A logical value controlling whether or not
  a message is displayed when <code>emmeans</code> averages over a factor involved
  in an interaction. It is probably not appropriate to do this, unless
  the interaction is weak. Defaults to <code>TRUE</code>.</p></dd>

<dt><code>msg.nesting</code></dt>
<dd><p>A logical value controlling whether or not to
  display a message when a nesting structure is auto-detected. The existence
  of such a structure affects computations of EMMs. Sometimes, a nesting
  structure is falsely detected – namely when a user has omitted some
  main effects but included them in interactions. This does not change the
  model fit, but it produces a different parameterization that is picked
  up when the reference grid is constructed. Defaults to <code>TRUE</code>.</p></dd>

<dt><code>rg.limit</code></dt>
<dd><p>An integer value setting a limit on the number of rows
  in a newly constructed reference grid. This is checked based on the number of
  levels of the factors involved; but it excludes the levels of any multivariate
  responses because those are not yet known. The reference grid consists of all
  possible combinations of the predictors, and this can become huge if there are
  several factors. An error is thrown if this limit is exceeded. One can use the
  <code>nuisance</code> argument of <code><a href="ref_grid.html">ref_grid</a></code> to collapse on nuisance
  factors, thus making the grid smaller. Defaults to 10,000.</p></dd>

<dt><code>simplify.names</code></dt>
<dd><p>A logical value controlling whether to
  simplify (when possible) names in the model formula that refer to datasets –
  for example, should we simplify a predictor name like “<code>data$trt</code>”
  to just “<code>trt</code>”? Defaults to <code>TRUE</code>.</p></dd>

<dt><code>opt.digits</code></dt>
<dd><p>A logical value controlling the precision with which
  summaries are printed. If <code>TRUE</code> (default), the number of digits
  displayed is just enough to reasonably distinguish estimates from the ends
  of their confidence intervals; but always at least 3 digits. If
  <code>FALSE</code>, the system value <code>getOption("digits")</code> is used.</p></dd>

<dt><code>back.bias.adj</code></dt>
<dd><p>A logical value controlling whether we
  try to adjust bias when back-transforming. If <code>FALSE</code>, we use naive
  back transformation. If <code>TRUE</code> <em>and <code>sigma</code> is available and valid</em>, a
  second-order adjustment is applied to estimate the mean on the response
  scale. A warning is issued if no valid <code>sigma</code> is available</p></dd>

<dt><code>enable.submodel</code></dt>
<dd><p>A logical value. If <code>TRUE</code>, enables support
  for selected model classes to implement the <code>submodel</code> option. If
  <code>FALSE</code>, this support is disabled. Setting this option to <code>FALSE</code>
  could save excess memory consumption.</p></dd>



</dl><p><!-- %%% end describe{} -->
Some other options have more specific purposes:</p><dl><dt><code>estble.tol</code></dt>
<dd><p>Tolerance for determining estimability in
rank-deficient cases. If absent, the value in <code>emm_defaults$estble.tol)</code>
is used.</p></dd>

<dt><code>save.ref_grid</code></dt>
<dd><p>Logical value of <code>TRUE</code> if you wish the
latest reference grid created to be saved in <code>.Last.ref_grid</code>.
The default is <code>FALSE</code>.</p></dd>

<dt>Options for <code>lme4::lmerMod</code> models</dt>
<dd><p>Options <code>lmer.df</code>,
<code>disable.pbkrtest</code>, <code>pbkrtest.limit</code>, <code>disable.lmerTest</code>,
and <code>lmerTest.limit</code>
options affect how degrees of freedom are computed for <code>lmerMod</code> objects
produced by the <span class="pkg">lme4</span> package). See that section of the "models" vignette
for details.</p></dd>


</dl><p><!-- %%%%%% end \describe --></p>
    </div>
    <div class="section level2">
    <h2 id="reproducible-bugs">Reproducible bugs<a class="anchor" aria-label="anchor" href="#reproducible-bugs"></a></h2>


<p>Most options set display attributes and such that are not likely to be associated
with bugs in the code. However, some other options (e.g., <code>cov.keep</code>)
are essentially configuration settings that may affect how/whether the code
runs, and the settings for these options may cause subtle effects that may be
hard to reproduce. Therefore, when sending a bug report, please create a reproducible
example and make sure the bug occurs with all options set at their defaults.
This is done by preceding it with  <code>emm_options(disable = TRUE)</code>.</p>
<p>By the way, <code>disable</code> works like a stack (LIFO buffer), in that <code>disable = TRUE</code>
is equivalent to <code>emm_options(saved.opts = emm_options())</code> and
<code>emm_options(disable = FALSE)</code> is equivalent to
<code>options(emmeans = get_emm_option("saved.opts"))</code>. To completely erase
all options, use <code>options(emmeans = NULL)</code></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="update.emmGrid.html">update.emmGrid</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">emm_options</span><span class="op">(</span>ref_grid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>level <span class="op">=</span> <span class="fl">.90</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            contrast <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>infer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>,<span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            estble.tol <span class="op">=</span> <span class="fl">1e-6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Sets default confidence level to .90 for objects created by ref.grid</span></span></span>
<span class="r-in"><span><span class="co"># AS WELL AS emmeans called with a model object (since it creates a </span></span></span>
<span class="r-in"><span><span class="co"># reference grid). In addition, when we call 'contrast', 'pairs', etc.,</span></span></span>
<span class="r-in"><span><span class="co"># confidence intervals rather than tests are displayed by default.</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">emm_options</span><span class="op">(</span>disable.pbkrtest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># This forces use of asymptotic methods for lmerMod objects.</span></span></span>
<span class="r-in"><span><span class="co"># Set to FALSE or NULL to re-enable using pbkrtest.</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># See tolerance being used for determining estimability</span></span></span>
<span class="r-in"><span><span class="fu">get_emm_option</span><span class="op">(</span><span class="st">"estble.tol"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1e-08</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Set all options to their defaults</span></span></span>
<span class="r-in"><span><span class="fu">emm_options</span><span class="op">(</span>disable <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># ... and perhaps follow with code for a minimal reproducible bug,</span></span></span>
<span class="r-in"><span><span class="co">#     which may include emm_options() clls if they are pertinent ...</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># restore options that had existed previously</span></span></span>
<span class="r-in"><span><span class="fu">emm_options</span><span class="op">(</span>disable <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Russell V. Lenth.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

