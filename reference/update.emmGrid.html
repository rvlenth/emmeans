<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Objects of class emmGrid contain several settings that affect such things as
what arguments to pass to summary.emmGrid. 
The update method allows safer management of these settings than
by direct modification of its slots."><title>Update an emmGrid object — update.emmGrid • emmeans</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Update an emmGrid object — update.emmGrid"><meta property="og:description" content="Objects of class emmGrid contain several settings that affect such things as
what arguments to pass to summary.emmGrid. 
The update method allows safer management of these settings than
by direct modification of its slots."><meta property="og:image" content="https://rvlenth.github.io/emmeans/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">emmeans</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.10.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/AQuickStart.html">Quick start guide for **emmeans**</a>
    <a class="dropdown-item" href="../articles/basics.html">Basics of estimated marginal means</a>
    <a class="dropdown-item" href="../articles/comparisons.html">Comparisons and contrasts in emmeans</a>
    <a class="dropdown-item" href="../articles/confidence-intervals.html">Confidence intervals and tests in emmeans</a>
    <a class="dropdown-item" href="../articles/FAQs.html">FAQs for emmeans</a>
    <a class="dropdown-item" href="../articles/interactions.html">Interaction analysis in emmeans</a>
    <a class="dropdown-item" href="../articles/messy-data.html">Working with messy data</a>
    <a class="dropdown-item" href="../articles/models.html">Models supported by emmeans</a>
    <a class="dropdown-item" href="../articles/predictions.html">Prediction in **emmeans**</a>
    <a class="dropdown-item" href="../articles/re-engineering-clds.html">Re-engineering CLDs</a>
    <a class="dropdown-item" href="../articles/sophisticated.html">Sophisticated models in emmeans</a>
    <a class="dropdown-item" href="../articles/transformations.html">Transformations and link functions in emmeans</a>
    <a class="dropdown-item" href="../articles/utilities.html">Utilities and options for emmeans</a>
    <a class="dropdown-item" href="../articles/vignette-topics.html">Index of vignette topics</a>
    <a class="dropdown-item" href="../articles/xplanations.html">Explanations supplement</a>
    <a class="dropdown-item" href="../articles/xtending.html">For developers: Extending **emmeans**</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rvlenth/emmeans/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Update an <code>emmGrid</code> object</h1>
      <small class="dont-index">Source: <a href="https://github.com/rvlenth/emmeans/blob/HEAD/R/emmGrid-methods.R" class="external-link"><code>R/emmGrid-methods.R</code></a>, <a href="https://github.com/rvlenth/emmeans/blob/HEAD/R/summary.R" class="external-link"><code>R/summary.R</code></a></small>
      <div class="d-none name"><code>update.emmGrid.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Objects of class <code>emmGrid</code> contain several settings that affect such things as
what arguments to pass to <code><a href="summary.emmGrid.html">summary.emmGrid</a></code>. 
The <code>update</code> method allows safer management of these settings than
by direct modification of its slots.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for emmGrid</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span>, silent <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for emmGrid</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="co"># S3 method for summary_emm</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">by.vars</span>, <span class="va">mesg</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>An <code>emmGrid</code> object</p></dd>


<dt>...</dt>
<dd><p>Options to be set. These must match a list of known options (see
Details)</p></dd>


<dt>silent</dt>
<dd><p>Logical value. If <code>FALSE</code> (the default), a message is
displayed if any options are not matched. If <code>TRUE</code>, no messages are
shown.</p></dd>


<dt>x</dt>
<dd><p>an <code>emmGrid</code> object</p></dd>


<dt>value</dt>
<dd><p><code>list</code> or replacement levels. See the documentation for
<code>update.emmGrid</code> with the <code>levels</code> argument, 
as well as the section below on “Replaciong levels”</p></dd>


<dt>by.vars, mesg</dt>
<dd><p>Attributes that can be altered in <code>update.summary_emm</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>an updated <code>emmGrid</code> object.</p>


<p><code>levels&lt;-</code> replaces the levels of the object in-place.
  See the section on replacing levels for details.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>When it makes sense, an option set by <code>update</code> will persist into 
future results based on that object. But some options are disabled as well.
For example, a <code>calc</code> option will be nulled-out if <code>contrast</code>
is called, because it probably will not make sense to do the same 
calculations on the contrast results, and in fact the variable(s) needed
may not even still exist.
<code>factor(percent)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    

<p>The names in <code>...</code> are partially matched against those that are valid, and if a match is found, it adds or replaces the current setting. The valid names are</p>
<dl><dt><code>tran</code>, <code>tran2</code></dt>
<dd><p>(<code>list</code> or <code>character</code>) specifies
the transformation which, when inverted, determines the results displayed by
<code><a href="summary.emmGrid.html">summary.emmGrid</a></code>, <code><a href="summary.emmGrid.html">predict.emmGrid</a></code>, or <code><a href="emmip.html">emmip</a></code> when
<code>type="response"</code>. The value may be the name of a standard
transformation from <code><a href="https://rdrr.io/r/stats/make.link.html" class="external-link">make.link</a></code> or additional ones supported by
name, such as <code>"log2"</code>; or, for a custom transformation, a <code>list</code>
containing at least the functions <code>linkinv</code> (the inverse of the
transformation) and <code>mu.eta</code> (the derivative thereof). The
<code><a href="make.tran.html">make.tran</a></code> function returns such lists for a number of popular
transformations. See the help page of <code><a href="make.tran.html">make.tran</a></code> for details as
well as information on the additional named transformations that are
supported. <code>tran2</code> is just like <code>tran</code> except it is a second
transformation (i.e., a response transformation in a generalized linear
model).</p></dd>


<dt><code>tran.mult</code></dt>
<dd><p>Multiple for <code>tran</code>. For example, for the
response transformation <samp>2*sqrt(y)</samp> (or <samp>sqrt(y) + sqrt(y + 1)</samp>,
for that matter), we should have <code>tran = "sqrt"</code> and <code>tran.mult =
2</code>. If absent, a multiple of 1 is assumed.</p></dd>


<dt><code>tran.offset</code></dt>
<dd><p>Additive constant before a transformation is applied.
For example, a response transformation of <code>log(y + pi)</code> has
<code>tran.offset  = pi</code>. If no value is present, an offset of 0 is assumed.</p></dd>


<dt><code>estName</code></dt>
<dd><p>(<code>character</code>) is the column label used for
displaying predictions or EMMs.</p></dd>


<dt><code>inv.lbl</code></dt>
<dd><p>(<code>character)</code>) is the column label to use for
predictions or EMMs when <code>type="response"</code>.</p></dd>


<dt><code>by.vars</code></dt>
<dd><p>(<code>character)</code> vector or <code>NULL</code>) the variables
used for grouping in the summary, and also for defining subfamilies in a call
to <code><a href="contrast.html">contrast</a></code>.</p></dd>


<dt><code>pri.vars</code></dt>
<dd><p>(<code>character</code> vector) are the names of the grid
variables that are not in <code>by.vars</code>. Thus, the combinations of their
levels are used as columns in each table produced by <code><a href="summary.emmGrid.html">summary.emmGrid</a></code>.</p></dd>


<dt><code>alpha</code></dt>
<dd><p>(numeric) is the default significance level for tests, in
<code><a href="summary.emmGrid.html">summary.emmGrid</a></code> as well as <code><a href="plot.html">plot.emmGrid</a></code>
when <samp>CIs = TRUE</samp>. Be cautious that methods that depend on
specifying <code>alpha</code> are prone to abuse. See the
discussion in <a href="../doc/basics.html#pvalues"><code><a href="../articles/basics.html">vignette("basics", "emmeans")</a></code></a>.</p></dd>


<dt><code>adjust</code></dt>
<dd><p>(<code>character)</code>) is the default for the <code>adjust</code>
argument in <code><a href="summary.emmGrid.html">summary.emmGrid</a></code>.</p></dd>


<dt><code>cross.adjust</code></dt>
<dd><p>(<code>character)</code>) is the default for the <code>cross.adjust</code>
argument in <code><a href="summary.emmGrid.html">summary.emmGrid</a></code> (used for adjusting between groups).</p></dd>


<dt><code>famSize</code></dt>
<dd><p>(integer) is the number of means involved in a family of
inferences; used in Tukey adjustment</p></dd>


<dt><code>infer</code></dt>
<dd><p>(<code>logical</code> vector of length 2) is the default value
of <code>infer</code> in <code><a href="summary.emmGrid.html">summary.emmGrid</a></code>.</p></dd>


<dt><code>level</code></dt>
<dd><p>(numeric) is the default confidence level, <code>level</code>,
in <code><a href="summary.emmGrid.html">summary.emmGrid</a></code>. <em>Note:</em> You must specify all five letters 
of ‘level’ to distinguish it from the slot name ‘levels’.</p></dd>


<dt><code>df</code></dt>
<dd><p>(numeric) overrides the default degrees of freedom with a
specified single value.</p></dd>


<dt><code>calc</code></dt>
<dd><p>(list) additional calculated columns. See <code><a href="summary.emmGrid.html">summary.emmGrid</a></code>.</p></dd>


<dt><code>null</code></dt>
<dd><p>(numeric) null hypothesis for <code>summary</code> or
<code>test</code> (taken to be zero if missing).</p></dd>


<dt><code>side</code></dt>
<dd><p>(numeric or character) <code>side</code> specification for for
<code>summary</code> or <code>test</code> (taken to be zero if missing).</p></dd>


<dt><code>sigma</code></dt>
<dd><p>(numeric) Error SD to use in predictions and for bias-adjusted
back-transformations</p></dd>


<dt><code>delta</code></dt>
<dd><p>(numeric) <code>delta</code> specification for <code>summary</code>
or <code>test</code> (taken to be zero if missing).</p></dd>


<dt><code>predict.type</code> or <code>type</code></dt>
<dd><p>(character) sets the default method
of displaying predictions in <code><a href="summary.emmGrid.html">summary.emmGrid</a></code>,
<code><a href="summary.emmGrid.html">predict.emmGrid</a></code>, and <code><a href="emmip.html">emmip</a></code>. Valid values are
<code>"link"</code> (with synonyms <code>"lp"</code> and <code>"linear"</code>), or
<code>"response"</code>.</p></dd>


<dt><code>bias.adjust</code>, <code>frequentist</code></dt>
<dd><p>(logical) These
are used by <code>summary</code> if the value of these arguments are not specified.</p></dd>


<dt><code>estType</code></dt>
<dd><p>(<code>character</code>) is used internally to determine 
what <code>adjust</code> methods are appropriate. It should match one of 
<samp>c("prediction", "contrast", "pairs")</samp>. As an example of why this is needed,
the Tukey adjustment should only be used for pairwise comparisons 
(<code>estType = "pairs"</code>); if <code>estType</code> is some other string, Tukey
adjustments are not allowed.</p></dd>


<dt><code>avgd.over</code></dt>
<dd><p>(<code>character)</code> vector) are the names of the 
variables whose levels are averaged over in obtaining marginal averages of 
predictions, i.e., estimated marginal means. Changing this might produce a 
misleading printout, but setting it to <code>character(0)</code> will suppress the 
“averaged over” message in the summary.</p></dd>


<dt><code>initMesg</code></dt>
<dd><p>(<code>character</code>) is a string that is added to the
beginning of any annotations that appear below the <code><a href="summary.emmGrid.html">summary.emmGrid</a></code>
display.</p></dd>


<dt><code>methDesc</code></dt>
<dd><p>(<code>character</code>) is a string that may be used for
creating names for a list of <code>emmGrid</code> objects.</p></dd>


<dt><code>nesting</code></dt>
<dd><p>(Character or named <code>list</code>) specifies the nesting
structure. See “Recovering or overriding model information” in the
documentation for <code><a href="ref_grid.html">ref_grid</a></code>. The current nesting structure is
displayed by <code><a href="emmGrid-methods.html">str.emmGrid</a></code>.</p></dd>


<dt><code>levels</code></dt>
<dd><p>named <code>list</code> of new levels for the elements of the
current <code>emmGrid</code>. The list name(s) are used as new variable names, and
if needed, the list is expanded using <code>expand.grid</code>. These results replace
current variable names and levels. This specification changes the <code>levels</code>,
<code>grid</code>, <code>roles</code>, and <code>misc</code> slots in the updated <code>emmGrid</code>,
and resets <code>pri.vars</code>, <code>by.vars</code>, <code>adjust</code>, <code>famSize</code>,
and <code>avgd.over</code>. In addition, if there is nesting of factors, that may be 
altered; a warning is issued if it involves something other than mere name changes.
<em>Note:</em> All six letters of <code>levels</code> is needed in order to distinguish
it from <code>level</code>.</p></dd>


<dt><code>submodel</code></dt>
<dd><p><code>formula</code> or <code>character</code> value specifying a 
submodel (requires this feature being supported by underlying methods 
for the model class). When specified, the <code>linfct</code> slot is replaced by 
its aliases for the specified sub-model. Any factors in the sub-model that 
do not appear in the model matrix are ignored, as are any interactions that 
are not in the main model, and any factors associate with multivariate responses. 
The estimates displayed are then computed as if 
the sub-model had been fitted. (However, the standard errors will be based on the
error variance(s) of the full model.) 
<em>Note:</em> The formula should refer only to predictor names, <em>excluding</em> any
function calls (such as <code>factor</code> or <code>poly</code>) that appear in the 
original model formula. See the example.</p>
<p>The character values allowed should partially 
match <code>"minimal"</code> or <code>"type2"</code>. With <code>"minimal"</code>, the sub-model
is taken to be the one only involving the surviving factors in <code>object</code>
(the ones averaged over being omitted). Specifying <code>"type2"</code> is the same as
<code>"minimal"</code> except only the highest-order term in the submodel is retained,
and all effects not containing it are orthogonalized-out. Thus, in a purely linear
situation such as an <code>lm</code> model, the joint test
of the modified object is in essence a type-2 test as in <code><a href="https://rdrr.io/pkg/car/man/Anova.html" class="external-link">car::Anova</a></code>.</p>
<p>For some objects such as generalized linear models, specifying <code>submodel</code>
will typically not produce the same estimates or type-2 tests as would be
obtained by actually fitting a separate model with those specifications.
The reason is that those models are fitted by iterative-reweighting methods,
whereas the <code>submodel</code> calculations preserve the final weights used in
fitting the full model.</p></dd>


<dt>(any other slot name)</dt>
<dd><p>If the name matches an element of
<code>slotNames(object)</code> other than <code>levels</code>, that slot is replaced by 
the supplied value, if it is of the required class (otherwise an error occurs).</p>
<p>The user must be very careful in
replacing slots because they are interrelated; for example, the lengths
and dimensions of <code>grid</code>, <code>linfct</code>, <code>bhat</code>, and <code>V</code> must
conform.</p></dd>


</dl><p><!-- %%%%%%% end \describe --></p>
    </div>
    <div class="section level2">
    <h2 id="replacing-levels">Replacing levels<a class="anchor" aria-label="anchor" href="#replacing-levels"></a></h2>
    

<p>The <code>levels&lt;-</code> method uses <code>update.emmGrid</code> to replace the
levels of one or more factors. This method allows selectively replacing
the levels of just one factor (via subsetting operators), whereas 
<code>update(x, levels = list(...))</code> requires a list of <em>all</em> factors
and their levels. If any factors are to be renamed, we must replace all
levels and include the new names in the replacements. See the examples.</p>
    </div>
    <div class="section level2">
    <h2 id="method-for-summary-emm-objects">Method for <code>summary_emm</code> objects<a class="anchor" aria-label="anchor" href="#method-for-summary-emm-objects"></a></h2>
    

<p>This method exists so that we can change the way a summary is displayed,
by changing the by variables or the annotations.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="emm_options.html">emm_options</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Using an already-transformed response:</span></span></span>
<span class="r-in"><span><span class="va">pigs.lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">conc</span><span class="op">)</span> <span class="op">~</span> <span class="va">source</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">percent</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">pigs</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Reference grid that knows about the transformation</span></span></span>
<span class="r-in"><span><span class="co"># and asks to include the sample size in any summaries:</span></span></span>
<span class="r-in"><span><span class="va">pigs.rg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="fu"><a href="ref_grid.html">ref_grid</a></span><span class="op">(</span><span class="va">pigs.lm</span><span class="op">)</span>, tran <span class="op">=</span> <span class="st">"log"</span>, </span></span>
<span class="r-in"><span>                    predict.type <span class="op">=</span> <span class="st">"response"</span>,</span></span>
<span class="r-in"><span>                    calc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>n <span class="op">=</span> <span class="op">~</span><span class="va">.wgt.</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="emmeans.html">emmeans</a></span><span class="op">(</span><span class="va">pigs.rg</span>, <span class="st">"source"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> NOTE: Results may be misleading due to involvement in interactions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  source response   SE df  n lower.CL upper.CL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  fish       29.9 1.12 17 10     27.6     32.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  soy        38.9 1.60 17 10     35.7     42.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  skim       46.1 1.97 17  9     42.1     50.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Results are averaged over the levels of: percent </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confidence level used: 0.95 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Intervals are back-transformed from the log scale </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Obtain estimates for the additive model</span></span></span>
<span class="r-in"><span><span class="co"># [Note that the submodel refers to 'percent', not 'factor(percent)']</span></span></span>
<span class="r-in"><span><span class="fu"><a href="emmeans.html">emmeans</a></span><span class="op">(</span><span class="va">pigs.rg</span>, <span class="st">"source"</span>, submodel <span class="op">=</span> <span class="op">~</span> <span class="va">source</span> <span class="op">+</span> <span class="va">percent</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> NOTE: Results may be misleading due to involvement in interactions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  source response   SE df  n lower.CL upper.CL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  fish       29.8 1.10 17 10     27.6     32.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  soy        39.1 1.48 17 10     36.1     42.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  skim       44.6 1.77 17  9     41.0     48.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Results are averaged over the levels of: percent </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> submodel: ~ source + percent </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confidence level used: 0.95 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Intervals are back-transformed from the log scale </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Type II ANOVA</span></span></span>
<span class="r-in"><span><span class="fu"><a href="joint_tests.html">joint_tests</a></span><span class="op">(</span><span class="va">pigs.rg</span>, submodel <span class="op">=</span> <span class="st">"type2"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  model term     df1 df2 F.ratio p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  source           2  17  28.291  &lt;.0001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  percent          3  17   7.827  0.0017</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  source:percent   6  17   0.926  0.5011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Changing levels of one factor</span></span></span>
<span class="r-in"><span><span class="va">newrg</span> <span class="op">&lt;-</span> <span class="va">pigs.rg</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">newrg</span><span class="op">)</span><span class="op">$</span><span class="va">source</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span></span></span>
<span class="r-in"><span><span class="va">newrg</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  source percent response   SE df n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1       9     25.7 2.11 17 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       2       9     34.4 2.31 17 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       3       9     35.2 2.36 17 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1      12     30.9 2.07 17 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       2      12     39.6 2.66 17 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       3      12     43.2 2.90 17 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1      15     31.0 2.55 17 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       2      15     39.2 2.63 17 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       3      15     49.6 4.08 17 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1      18     32.3 2.17 17 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       2      18     42.9 4.99 17 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       3      18     59.8 6.95 17 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Unraveling a previously standardized covariate</span></span></span>
<span class="r-in"><span><span class="va">zd</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">fiber</span><span class="op">$</span><span class="va">diameter</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fibz.lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">strength</span> <span class="op">~</span> <span class="va">machine</span> <span class="op">*</span> <span class="va">zd</span>, data <span class="op">=</span> <span class="va">fiber</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">fibz.rg</span> <span class="op">&lt;-</span> <span class="fu"><a href="ref_grid.html">ref_grid</a></span><span class="op">(</span><span class="va">fibz.lm</span>, at <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>zd <span class="op">=</span> <span class="op">-</span><span class="fl">2</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>   <span class="co">### 2*SD range</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  machine zd prediction    SE df</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A       -2       30.7 2.025  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B       -2       34.2 2.470  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C       -2       31.1 1.405  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A       -1       35.4 1.285  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B       -1       37.9 1.575  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C       -1       34.8 0.803  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A        0       40.2 0.777  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B        0       41.6 0.858  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C        0       38.5 0.966  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A        1       45.0 0.979  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B        1       45.3 0.929  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C        1       42.3 1.686  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A        2       49.8 1.648  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B        2       49.0 1.693  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C        2       46.0 2.523  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">lev</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">fibz.rg</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">fibz.rg</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span></span></span>
<span class="r-in"><span>    machine <span class="op">=</span> <span class="va">lev</span><span class="op">$</span><span class="va">machine</span>,</span></span>
<span class="r-in"><span>    diameter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">zd</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                    <span class="va">`scaled:center`</span> <span class="op">+</span> <span class="va">`scaled:scale`</span> <span class="op">*</span> <span class="va">lev</span><span class="op">$</span><span class="va">zd</span><span class="op">)</span> <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fibz.rg</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  machine diameter prediction    SE df</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A           15.5       30.7 2.025  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B           15.5       34.2 2.470  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C           15.5       31.1 1.405  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A           19.8       35.4 1.285  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B           19.8       37.9 1.575  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C           19.8       34.8 0.803  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A           24.1       40.2 0.777  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B           24.1       41.6 0.858  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C           24.1       38.5 0.966  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A           28.5       45.0 0.979  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B           28.5       45.3 0.929  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C           28.5       42.3 1.686  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  A           32.8       49.8 1.648  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  B           32.8       49.0 1.693  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  C           32.8       46.0 2.523  9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Compactify results with a by variable</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="fu"><a href="joint_tests.html">joint_tests</a></span><span class="op">(</span><span class="va">pigs.rg</span>, by <span class="op">=</span> <span class="st">"source"</span><span class="op">)</span>, by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  model term source df1 df2 F.ratio p.value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  percent    fish     3  17   1.712  0.2023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  percent    soy      3  17   1.290  0.3097</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  percent    skim     3  17   6.676  0.0035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Russell V. Lenth.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

