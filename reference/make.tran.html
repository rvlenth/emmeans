<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Response-transformation extensions — make.tran • emmeans</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Response-transformation extensions — make.tran"><meta name="description" content="The make.tran function creates the needed information to perform
transformations of the response
variable, including inverting the transformation and estimating variances of
back-transformed predictions via the delta method. make.tran is
similar to make.link, but it covers additional transformations.
The result can be used as an environment in which the model is fitted, or as
the tran argument in update.emmGrid (when the given
transformation was already applied in an existing model)."><meta property="og:description" content="The make.tran function creates the needed information to perform
transformations of the response
variable, including inverting the transformation and estimating variances of
back-transformed predictions via the delta method. make.tran is
similar to make.link, but it covers additional transformations.
The result can be used as an environment in which the model is fitted, or as
the tran argument in update.emmGrid (when the given
transformation was already applied in an existing model)."><meta property="og:image" content="https://rvlenth.github.io/emmeans/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">emmeans</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.10.4.900001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/AQuickStart.html">Quick start guide for **emmeans**</a></li>
    <li><a class="dropdown-item" href="../articles/basics.html">Basics of estimated marginal means</a></li>
    <li><a class="dropdown-item" href="../articles/comparisons.html">Comparisons and contrasts in emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/confidence-intervals.html">Confidence intervals and tests in emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/FAQs.html">FAQs for emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/interactions.html">Interaction analysis in emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/messy-data.html">Working with messy data</a></li>
    <li><a class="dropdown-item" href="../articles/models.html">Models supported by emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/predictions.html">Prediction in **emmeans**</a></li>
    <li><a class="dropdown-item" href="../articles/re-engineering-clds.html">Re-engineering CLDs</a></li>
    <li><a class="dropdown-item" href="../articles/sophisticated.html">Sophisticated models in emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/transformations.html">Transformations and link functions in emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/utilities.html">Utilities and options for emmeans</a></li>
    <li><a class="dropdown-item" href="../articles/vignette-topics.html">Index of vignette topics</a></li>
    <li><a class="dropdown-item" href="../articles/xplanations.html">Explanations supplement</a></li>
    <li><a class="dropdown-item" href="../articles/xtending.html">For developers: Extending **emmeans**</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rvlenth/emmeans/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Response-transformation extensions</h1>
      <small class="dont-index">Source: <a href="https://github.com/rvlenth/emmeans/blob/master/R/transformations.R" class="external-link"><code>R/transformations.R</code></a></small>
      <div class="d-none name"><code>make.tran.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>make.tran</code> function creates the needed information to perform
transformations of the response
variable, including inverting the transformation and estimating variances of
back-transformed predictions via the delta method. <code>make.tran</code> is
similar to <code><a href="https://rdrr.io/r/stats/make.link.html" class="external-link">make.link</a></code>, but it covers additional transformations.
The result can be used as an environment in which the model is fitted, or as
the <code>tran</code> argument in <code><a href="update.emmGrid.html">update.emmGrid</a></code> (when the given
transformation was already applied in an existing model).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make.tran</span><span class="op">(</span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"genlog"</span>, <span class="st">"power"</span>, <span class="st">"boxcox"</span>, <span class="st">"sympower"</span>, <span class="st">"asin.sqrt"</span>,</span>
<span>  <span class="st">"atanh"</span>, <span class="st">"bcnPower"</span>, <span class="st">"scale"</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">1</span>, beta <span class="op">=</span> <span class="fl">0</span>, <span class="va">param</span>, <span class="va">y</span>, <span class="va">inner</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">inverse</span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>The name of a standard transformation supported by <code>stat::make.link</code>,
or of a special transformation described under Details.</p></dd>


<dt id="arg-alpha-beta">alpha, beta<a class="anchor" aria-label="anchor" href="#arg-alpha-beta"></a></dt>
<dd><p>Numeric parameters needed for special transformations.</p></dd>


<dt id="arg-param">param<a class="anchor" aria-label="anchor" href="#arg-param"></a></dt>
<dd><p>If non-missing, this specifies either
<code>alpha</code> or <code>c(alpha, beta)</code> (provided for backward compatibility).
Also, for the same reason, if <code>alpha</code> is of length more than 1,
it is taken as <code>param</code>.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>A numeric response variable used (<em>and required</em>) with <code>type = "scale"</code>,
where <code>scale(y)</code> determines <code>alpha</code> and <code>beta</code>.</p></dd>


<dt id="arg-inner">inner<a class="anchor" aria-label="anchor" href="#arg-inner"></a></dt>
<dd><p>another transformation. See the section on compound transformations</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to other functions/methods</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>list</code> having at least the same elements as those returned by
  <code><a href="https://rdrr.io/r/stats/make.link.html" class="external-link">make.link</a></code>. The <code>linkfun</code> component is the transformation
  itself. Each of the functions is associated with an environment where any
  parameter values are defined.</p>
<p><code>inverse</code> returns the reciprocal of its argument. It allows
  the <code>"inverse"</code> link to be auto-detected as a response transformation.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The <code>genlog</code> transformation is technically unneeded, because
  a response transformation of the form <code>log(y + c)</code> is now auto-detected
  by <code><a href="ref_grid.html">ref_grid</a></code>.</p>
<p>We modify certain <code><a href="https://rdrr.io/r/stats/make.link.html" class="external-link">make.link</a></code> results in transformations
  where there is a restriction on valid prediction values, so that reasonable
  inverse predictions are obtained, no matter what. For example, if a
  <code>sqrt</code> transformation was used but a predicted value is negative, the
  inverse transformation is zero rather than the square of the prediction. A
  side effect of this is that it is possible for one or both confidence
  limits, or even a standard error, to be zero.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<p>The <code>make.tran</code> function returns a
suitable list of functions for several popular transformations. Besides being
usable with <code>update</code>, the user may use this list as an enclosing
environment in fitting the model itself, in which case the transformation is
auto-detected when the special name <code>linkfun</code> (the transformation
itself) is used as the response transformation in the call. See the examples
below.</p>
<p>The primary purpose of <code>make.tran</code> is to support transformations that
require additional parameters, specified as <code>alpha</code> and <code>beta</code>;
these are the onse shown in the argument-matching list. However, standard
transformations supported by <code><a href="https://rdrr.io/r/stats/make.link.html" class="external-link">stats::make.link</a></code> are also supported.
In the following discussion of ones requiring parameters,
we use \(\alpha\) and \(\beta\) to
denote <code>alpha</code> and <code>beta</code>, and \(y\) to denote the response variable.
The <code>type</code> argument specifies the following transformations:</p><dl><dt><code>"genlog"</code></dt>
<dd><p>Generalized logarithmic transformation: \(\log_\beta(y +
  \alpha)\), where \(y &gt; -\alpha\).
  When \(\beta = 0\) (the default), we use \(\log_e(y + \alpha)\)</p></dd>

<dt><code>"power"</code></dt>
<dd><p>Power transformation: \((y-\beta)^\alpha\), where \(y &gt; \beta\).
  When \(\alpha = 0\), \(\log(y-\beta)\) is used instead.</p></dd>

<dt><code>"boxcox"</code></dt>
<dd><p>The Box-Cox transformation (unscaled by the geometric
  mean): \(((y - \beta)^\alpha - 1) / \alpha\), where \(y &gt; \beta\).
  When \(\alpha = 0\), \(\log(y - \beta)\)
  is used.</p></dd>

<dt><code>"sympower"</code></dt>
<dd><p>A symmetrized power transformation on the whole real
  line:
  \(|y - \beta|^\alpha\cdot sign(y - \beta)\). There are no restrictions on \(y\), but we
  require \(\alpha &gt; 0\) in order for the transformation to be monotone and
  continuous.</p></dd>

<dt><code>"asin.sqrt"</code></dt>
<dd><p>Arcsin-square-root transformation:
  \(\sin^{-1}(y/\alpha)^{1/2}\). Typically, <code>alpha</code> will be either 1 (default) or 100.</p></dd>

<dt><code>"atanh"</code></dt>
<dd><p>Arctanh transformation:
  \(\tanh^{-1}(y/\alpha)\). Typically, <code>alpha</code> will be either 1 (default) or 100.</p></dd>

<dt><code>"bcnPower"</code></dt>
<dd><p>Box-Cox with negatives allowed, as described for the
  <code>bcnPower</code> function in the <span class="pkg">car</span> package. It is defined as the Box-Cox
  transformation \((z^\alpha - 1) / \alpha\) of the variable \(z = y + (y^2+\beta^2)^{1/2}\).
  Note that this requires both parameters and that <code>beta &gt; 0</code>.</p></dd>

<dt><code>"scale"</code></dt>
<dd><p>This one is a little different than the others, in that
  <code>alpha</code> and <code>beta</code> are ignored; instead, they are determined by calling
  <code>scale(y, ...)</code>. The user should give as <code>y</code> the response variable in the
  model to be fitted to its scaled version.</p></dd>



</dl><p>Note that with the <code>"power"</code>, <code>"boxcox"</code>, or <code>"sympower"</code> transformations,
the argument <code>beta</code> specifies a location shift.
In the <code>"genpower"</code> transformation, <code>beta</code> specifies
the base of the logarithm – however, quirkily, the default of <code>beta = 0</code>
is taken to be the natural logarithm. For example,
<code>make.tran(0.5, 10)</code> sets up the \(\log_{10}(y + \frac12)\)
transformation. In the <code>"bcnPower"</code> transformation, <code>beta</code>
must be specified as a positive value.</p>
<p>For purposes of back-transformation, the <samp>sqrt(y) + sqrt(y+1)</samp>
transformation is treated exactly the same way as <samp>2*sqrt(y)</samp>, because
both are regarded as estimates of \(2\sqrt\mu\).</p>
    </div>
    <div class="section level2">
    <h2 id="cases-where-make-tran-may-not-be-needed">Cases where <code>make.tran</code> may not be needed<a class="anchor" aria-label="anchor" href="#cases-where-make-tran-may-not-be-needed"></a></h2>


<p>For standard transformations with no parameters, we usually don't need to use
<code>make.tran</code>; just the name of the transformation is all that is needed.
The functions <code><a href="emmeans.html">emmeans</a></code>, <code><a href="ref_grid.html">ref_grid</a></code>, and related ones
automatically detect response transformations that are recognized by
examining the model formula. These are <code>log</code>, <code>log2</code>, <code>log10</code>,
<code>log1p</code>,
<code>sqrt</code>, <code>logit</code>, <code>probit</code>, <code>cauchit</code>, <code>cloglog</code>; as
well as (for a response variable <code>y</code>) <code>asin(sqrt(y))</code>,
<code>asinh(sqrt(y))</code>, <code>atanh(y)</code>, and <code>sqrt(y) + sqrt(y+1)</code>.
In addition, any
constant multiple of these (e.g., <code>2*sqrt(y)</code>) is auto-detected and
appropriately scaled (see also the <code>tran.mult</code> argument in
<code><a href="update.emmGrid.html">update.emmGrid</a></code>).</p>
<p>A few additional transformations may be specified as character strings and
are auto-detected: <code>"identity"</code>, <code>"1/mu^2"</code>,
<code>"inverse"</code>, <code>"reciprocal"</code>, <code>"log10"</code>, <code>"log2"</code>,
<code>"asin.sqrt"</code>, <code>"asinh.sqrt"</code>, and <code>"atanh"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="compound-transformations">Compound transformations<a class="anchor" aria-label="anchor" href="#compound-transformations"></a></h2>


<p>A transformation that is a function of another function can be created by
specifying <code>inner</code> for the other function. For example, the
transformation \(1/\sqrt{y}\) can be created either by
<code>make.tran("inverse", inner = "sqrt")</code> or by <code>make.tran("power",
-0.5)</code>. In principle, transformations can be compounded to any depth.
Also, if <code>type</code> is <code>"scale"</code>, <code>y</code> is replaced by
<code>inner$linkfun(y)</code>, because that will be the variable that is scaled.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Fit a model using an oddball transformation:</span></span></span>
<span class="r-in"><span><span class="va">bctran</span> <span class="op">&lt;-</span> <span class="fu">make.tran</span><span class="op">(</span><span class="st">"boxcox"</span>, <span class="fl">0.368</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">warp.bc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">bctran</span>, </span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="fu">linkfun</span><span class="op">(</span><span class="va">breaks</span><span class="op">)</span> <span class="op">~</span> <span class="va">wool</span> <span class="op">*</span> <span class="va">tension</span>, data <span class="op">=</span> <span class="va">warpbreaks</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Obtain back-transformed LS means:    </span></span></span>
<span class="r-in"><span><span class="fu"><a href="emmeans.html">emmeans</a></span><span class="op">(</span><span class="va">warp.bc</span>, <span class="op">~</span> <span class="va">tension</span> <span class="op">|</span> <span class="va">wool</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wool = A:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  tension response   SE df lower.CL upper.CL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  L           42.4 4.48 48     34.0     52.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  M           23.1 3.05 48     17.5     29.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  H           23.3 3.07 48     17.7     30.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wool = B:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  tension response   SE df lower.CL upper.CL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  L           27.2 3.38 48     20.9     34.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  M           27.9 3.44 48     21.5     35.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  H           18.4 2.65 48     13.6     24.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confidence level used: 0.95 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Intervals are back-transformed from the Box-Cox (lambda = 0.368) scale </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Using a scaled response...</span></span></span>
<span class="r-in"><span><span class="co"># Case where it is auto-detected:</span></span></span>
<span class="r-in"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">yield</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">~</span> <span class="va">Variety</span>, data <span class="op">=</span> <span class="va">MOats</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="emmeans.html">emmeans</a></span><span class="op">(</span><span class="va">mod</span>, <span class="st">"Variety"</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Variety     response   SE df lower.CL upper.CL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Golden Rain     80.0 7.96 15     63.0     97.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Marvellous      86.7 7.96 15     69.7    103.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Victory         71.5 7.96 15     54.5     88.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confidence level used: 0.95 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Intervals are back-transformed from the scale(79.4, 19.4) scale </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Case where scaling is not auto-detected -- and what to do about it:</span></span></span>
<span class="r-in"><span><span class="va">copt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>contrasts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"contr.sum"</span>, <span class="st">"contr.poly"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mod.aov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aov.html" class="external-link">aov</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">yield</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">~</span> <span class="va">Variety</span> <span class="op">+</span> <span class="fu">Error</span><span class="op">(</span><span class="va">Block</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">MOats</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">emm.aov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="fu"><a href="emmeans.html">emmeans</a></span><span class="op">(</span><span class="va">mod.aov</span>, <span class="st">"Variety"</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> NOTE: Unable to recover scale() parameters. See '? make.tran'</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Scaling was not retrieved, but we can do:</span></span></span>
<span class="r-in"><span><span class="va">emm.aov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">emm.aov</span>, tran <span class="op">=</span> <span class="fu">make.tran</span><span class="op">(</span><span class="st">"scale"</span>, y <span class="op">=</span> <span class="va">MOats</span><span class="op">$</span><span class="va">yield</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="emmeans.html">emmeans</a></span><span class="op">(</span><span class="va">emm.aov</span>, <span class="st">"Variety"</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Variety     response   SE  df lower.CL upper.CL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Golden Rain     80.0 7.96 9.8     62.2     97.8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Marvellous      86.7 7.96 9.8     68.9    104.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Victory         71.5 7.96 9.8     53.7     89.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Warning: EMMs are biased unless design is perfectly balanced </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confidence level used: 0.95 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Intervals are back-transformed from the scale(79.4, 19.4) scale </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### Compound transformations</span></span></span>
<span class="r-in"><span><span class="co"># The following amount to the same thing:</span></span></span>
<span class="r-in"><span><span class="va">t1</span> <span class="op">&lt;-</span> <span class="fu">make.tran</span><span class="op">(</span><span class="st">"inverse"</span>, inner <span class="op">=</span> <span class="st">"sqrt"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t2</span> <span class="op">&lt;-</span> <span class="fu">make.tran</span><span class="op">(</span><span class="st">"power"</span>, <span class="op">-</span><span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="va">copt</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">### An existing model 'mod' was fitted with a y^(2/3) transformation...</span></span></span>
<span class="r-in"><span>  <span class="va">ptran</span> <span class="op">=</span> <span class="fu">make.tran</span><span class="op">(</span><span class="st">"power"</span>, <span class="fl">2</span><span class="op">/</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="emmeans.html">emmeans</a></span><span class="op">(</span><span class="va">mod</span>, <span class="st">"treatment"</span>, tran <span class="op">=</span> <span class="va">ptran</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pigs.lm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="fu">inverse</span><span class="op">(</span><span class="va">conc</span><span class="op">)</span> <span class="op">~</span> <span class="va">source</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">percent</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">pigs</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="emmeans.html">emmeans</a></span><span class="op">(</span><span class="va">pigs.lm</span>, <span class="st">"source"</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  source response    SE df lower.CL upper.CL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  fish       29.7 0.816 23     28.1     31.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  soy        39.0 1.436 23     36.2     42.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  skim       43.8 1.903 23     40.1     48.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Results are averaged over the levels of: percent </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Confidence level used: 0.95 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Intervals are back-transformed from the inverse scale </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Russell V. Lenth.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

